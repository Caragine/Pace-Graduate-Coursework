{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\Adam\\\\Documents\\\\PACE\\\\Fall 2020 - Semester 4\\\\CS 691 - Computer Science Project I\\\\jobster-master\\\\jobster-master\\\\code\\\\client\\\\src\\\\views\\\\Home\\\\components\\\\Profile\\\\Profile.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport { compose } from \"recompose\";\nimport { connect } from \"react-redux\";\nimport PropTypes from \"prop-types\";\nimport axios from \"axios\";\nimport jwt_decode from \"jwt-decode\";\nimport { Container, Grid, makeStyles } from '@material-ui/core';\nimport setAuthToken from \"../../../../utils/setAuthToken\";\nimport { setCurrentUser } from \"../../../../actions/authActions\";\nimport store from \"../../../../store\";\nimport Header from '../../components/Header/Header';\nimport HeaderLinksOut from '../../components/Header/HeaderLinksOut';\nimport Resume from './Resume';\nimport ProfileDetails from './ProfileDetails';\nimport ProfileComponent from './ProfileComponent';\nimport ProfileForm from './ProfileForm';\nimport { useHistory } from 'react-router-dom';\nconst useStyles = makeStyles(theme => ({\n  root: {\n    backgroundColor: theme.palette.background.dark,\n    minHeight: '100%',\n    paddingBottom: theme.spacing(3),\n    paddingTop: theme.spacing(3)\n  }\n}));\n\nconst Profile = props => {\n  _s();\n\n  const classes = useStyles();\n  const history = useHistory();\n  const [profData, setProfData] = React.useState({});\n  console.log(\"This is props\", props);\n  React.useEffect(() => {\n    // Check for token\n    if (localStorage.jwtToken) {\n      // Set auth token header auth\n      console.log(\"in effect\", localStorage.jwtToken);\n      setAuthToken(localStorage.jwtToken); // Decode token and get user info and exp\n\n      const decoded = jwt_decode(localStorage.jwtToken);\n      console.log(\"in effect decoded\", decoded); // Set user and isAuthenticated\n\n      store.dispatch(setCurrentUser(decoded));\n      axios({\n        method: \"get\",\n        url: \"http://localhost:5000/api/profile/\" + decoded.id\n      }).then(function (response) {\n        //handle success\n        console.log(response);\n        setProfData(response.data.payload);\n      }).catch(function (error) {\n        //handle error\n        console.log(error);\n      }); // Check for expired token\n\n      const currentTime = Date.now() / 1000;\n\n      if (decoded.exp < currentTime) {\n        console.log(\"Session Expired\"); // Redirect to login\n        // window.location.href = \"/login\";\n      }\n    } else {\n      history.replace('/');\n    }\n  }, [localStorage.jwtToken]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [props.auth.isAuthenticated ? /*#__PURE__*/_jsxDEV(HeaderLinksOut, {\n      user: props.auth.user\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 43\n    }, this) : /*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 87\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.root,\n      children: parseInt(props.auth.user.profstatus) ? /*#__PURE__*/_jsxDEV(Container, {\n        maxWidth: \"lg\",\n        children: /*#__PURE__*/_jsxDEV(Grid, {\n          container: true,\n          spacing: 3,\n          children: [/*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            lg: 6,\n            md: 6,\n            xs: 12,\n            children: /*#__PURE__*/_jsxDEV(ProfileComponent, {\n              user: profData\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 104,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            lg: 6,\n            md: 6,\n            xs: 12,\n            children: /*#__PURE__*/_jsxDEV(ProfileDetails, {\n              user: profData\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 112,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            lg: 12,\n            md: 12,\n            xs: 12,\n            children: /*#__PURE__*/_jsxDEV(Resume, {\n              u_resume: profData.u_resume\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 120,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 21\n      }, this) : /*#__PURE__*/_jsxDEV(Container, {\n        maxWidth: \"lg\",\n        children: /*#__PURE__*/_jsxDEV(Grid, {\n          container: true,\n          spacing: 3,\n          children: /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            lg: 12,\n            md: 12,\n            xs: 12,\n            children: /*#__PURE__*/_jsxDEV(ProfileForm, {\n              id: props.auth.user.id\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 138,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n};\n\n_s(Profile, \"RogDNj8zlKRECE53oTsVbKKqeFs=\", false, function () {\n  return [useStyles, useHistory];\n});\n\n_c = Profile;\nProfile.propTypes = {\n  auth: PropTypes.object.isRequired\n};\n\nfunction mapStateToProps(state) {\n  return {\n    auth: state.auth\n  };\n}\n\nexport default compose(connect(mapStateToProps, {}, null))(Profile);\n\nvar _c;\n\n$RefreshReg$(_c, \"Profile\");","map":{"version":3,"sources":["C:/Users/Adam/Documents/PACE/Fall 2020 - Semester 4/CS 691 - Computer Science Project I/jobster-master/jobster-master/code/client/src/views/Home/components/Profile/Profile.js"],"names":["React","compose","connect","PropTypes","axios","jwt_decode","Container","Grid","makeStyles","setAuthToken","setCurrentUser","store","Header","HeaderLinksOut","Resume","ProfileDetails","ProfileComponent","ProfileForm","useHistory","useStyles","theme","root","backgroundColor","palette","background","dark","minHeight","paddingBottom","spacing","paddingTop","Profile","props","classes","history","profData","setProfData","useState","console","log","useEffect","localStorage","jwtToken","decoded","dispatch","method","url","id","then","response","data","payload","catch","error","currentTime","Date","now","exp","replace","auth","isAuthenticated","user","parseInt","profstatus","u_resume","propTypes","object","isRequired","mapStateToProps","state"],"mappings":";;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,OAAT,QAAwB,WAAxB;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,UAAP,MAAuB,YAAvB;AACA,SACIC,SADJ,EAEIC,IAFJ,EAGIC,UAHJ,QAIO,mBAJP;AAOA,OAAOC,YAAP,MAAyB,gCAAzB;AACA,SAASC,cAAT,QAA+B,iCAA/B;AACA,OAAOC,KAAP,MAAkB,mBAAlB;AAEA,OAAOC,MAAP,MAAmB,gCAAnB;AACA,OAAOC,cAAP,MAA2B,wCAA3B;AACA,OAAOC,MAAP,MAAmB,UAAnB;AACA,OAAOC,cAAP,MAA2B,kBAA3B;AACA,OAAOC,gBAAP,MAA6B,oBAA7B;AACA,OAAOC,WAAP,MAAwB,eAAxB;AACA,SAASC,UAAT,QAA2B,kBAA3B;AAEA,MAAMC,SAAS,GAAGX,UAAU,CAAEY,KAAD,KAAY;AACrCC,EAAAA,IAAI,EAAE;AACFC,IAAAA,eAAe,EAAEF,KAAK,CAACG,OAAN,CAAcC,UAAd,CAAyBC,IADxC;AAEFC,IAAAA,SAAS,EAAE,MAFT;AAGFC,IAAAA,aAAa,EAAEP,KAAK,CAACQ,OAAN,CAAc,CAAd,CAHb;AAIFC,IAAAA,UAAU,EAAET,KAAK,CAACQ,OAAN,CAAc,CAAd;AAJV;AAD+B,CAAZ,CAAD,CAA5B;;AASA,MAAME,OAAO,GAAIC,KAAD,IAAW;AAAA;;AAEvB,QAAMC,OAAO,GAAGb,SAAS,EAAzB;AACA,QAAMc,OAAO,GAAGf,UAAU,EAA1B;AAEA,QAAM,CAACgB,QAAD,EAAWC,WAAX,IAA0BnC,KAAK,CAACoC,QAAN,CAAe,EAAf,CAAhC;AAEAC,EAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ,EAA6BP,KAA7B;AAGA/B,EAAAA,KAAK,CAACuC,SAAN,CAAgB,MAAM;AAClB;AACA,QAAIC,YAAY,CAACC,QAAjB,EAA2B;AACvB;AACAJ,MAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ,EAAyBE,YAAY,CAACC,QAAtC;AACAhC,MAAAA,YAAY,CAAC+B,YAAY,CAACC,QAAd,CAAZ,CAHuB,CAIvB;;AACA,YAAMC,OAAO,GAAGrC,UAAU,CAACmC,YAAY,CAACC,QAAd,CAA1B;AACAJ,MAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ,EAAiCI,OAAjC,EANuB,CAOvB;;AACA/B,MAAAA,KAAK,CAACgC,QAAN,CAAejC,cAAc,CAACgC,OAAD,CAA7B;AAEAtC,MAAAA,KAAK,CAAC;AACFwC,QAAAA,MAAM,EAAE,KADN;AAEFC,QAAAA,GAAG,EAAE,uCAAuCH,OAAO,CAACI;AAFlD,OAAD,CAAL,CAIKC,IAJL,CAIU,UAAUC,QAAV,EAAoB;AACtB;AACAX,QAAAA,OAAO,CAACC,GAAR,CAAYU,QAAZ;AACAb,QAAAA,WAAW,CAACa,QAAQ,CAACC,IAAT,CAAcC,OAAf,CAAX;AAEH,OATL,EAUKC,KAVL,CAUW,UAAUC,KAAV,EAAiB;AACpB;AACAf,QAAAA,OAAO,CAACC,GAAR,CAAYc,KAAZ;AACH,OAbL,EAVuB,CAyBvB;;AACA,YAAMC,WAAW,GAAGC,IAAI,CAACC,GAAL,KAAa,IAAjC;;AACA,UAAIb,OAAO,CAACc,GAAR,GAAcH,WAAlB,EAA+B;AAC3BhB,QAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ,EAD2B,CAE3B;AACA;AACH;AACJ,KAhCD,MAiCK;AACDL,MAAAA,OAAO,CAACwB,OAAR,CAAgB,GAAhB;AACH;AAEJ,GAvCD,EAuCG,CAACjB,YAAY,CAACC,QAAd,CAvCH;AA0CA,sBACI;AAAA,eACKV,KAAK,CAAC2B,IAAN,CAAWC,eAAX,gBAA6B,QAAC,cAAD;AAAgB,MAAA,IAAI,EAAE5B,KAAK,CAAC2B,IAAN,CAAWE;AAAjC;AAAA;AAAA;AAAA;AAAA,YAA7B,gBAAyE,QAAC,MAAD;AAAA;AAAA;AAAA;AAAA,YAD9E,eAEI;AAAK,MAAA,SAAS,EAAE5B,OAAO,CAACX,IAAxB;AAAA,gBACKwC,QAAQ,CAAC9B,KAAK,CAAC2B,IAAN,CAAWE,IAAX,CAAgBE,UAAjB,CAAR,gBAEG,QAAC,SAAD;AAAW,QAAA,QAAQ,EAAC,IAApB;AAAA,+BACI,QAAC,IAAD;AACI,UAAA,SAAS,MADb;AAEI,UAAA,OAAO,EAAE,CAFb;AAAA,kCAII,QAAC,IAAD;AACI,YAAA,IAAI,MADR;AAEI,YAAA,EAAE,EAAE,CAFR;AAGI,YAAA,EAAE,EAAE,CAHR;AAII,YAAA,EAAE,EAAE,EAJR;AAAA,mCAMI,QAAC,gBAAD;AAAkB,cAAA,IAAI,EAAE5B;AAAxB;AAAA;AAAA;AAAA;AAAA;AANJ;AAAA;AAAA;AAAA;AAAA,kBAJJ,eAYI,QAAC,IAAD;AACI,YAAA,IAAI,MADR;AAEI,YAAA,EAAE,EAAE,CAFR;AAGI,YAAA,EAAE,EAAE,CAHR;AAII,YAAA,EAAE,EAAE,EAJR;AAAA,mCAMI,QAAC,cAAD;AAAgB,cAAA,IAAI,EAAEA;AAAtB;AAAA;AAAA;AAAA;AAAA;AANJ;AAAA;AAAA;AAAA;AAAA,kBAZJ,eAoBI,QAAC,IAAD;AACI,YAAA,IAAI,MADR;AAEI,YAAA,EAAE,EAAE,EAFR;AAGI,YAAA,EAAE,EAAE,EAHR;AAII,YAAA,EAAE,EAAE,EAJR;AAAA,mCAMI,QAAC,MAAD;AAAQ,cAAA,QAAQ,EAAEA,QAAQ,CAAC6B;AAA3B;AAAA;AAAA;AAAA;AAAA;AANJ;AAAA;AAAA;AAAA;AAAA,kBApBJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,cAFH,gBAoCG,QAAC,SAAD;AAAW,QAAA,QAAQ,EAAC,IAApB;AAAA,+BACI,QAAC,IAAD;AACI,UAAA,SAAS,MADb;AAEI,UAAA,OAAO,EAAE,CAFb;AAAA,iCAII,QAAC,IAAD;AACI,YAAA,IAAI,MADR;AAEI,YAAA,EAAE,EAAE,EAFR;AAGI,YAAA,EAAE,EAAE,EAHR;AAII,YAAA,EAAE,EAAE,EAJR;AAAA,mCAMI,QAAC,WAAD;AAAa,cAAA,EAAE,EAAEhC,KAAK,CAAC2B,IAAN,CAAWE,IAAX,CAAgBd;AAAjC;AAAA;AAAA;AAAA;AAAA;AANJ;AAAA;AAAA;AAAA;AAAA;AAJJ;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AArCR;AAAA;AAAA;AAAA;AAAA,YAFJ;AAAA,kBADJ;AA4DH,CAhHD;;GAAMhB,O;UAEcX,S,EACAD,U;;;KAHdY,O;AAoHNA,OAAO,CAACkC,SAAR,GAAoB;AAChBN,EAAAA,IAAI,EAAEvD,SAAS,CAAC8D,MAAV,CAAiBC;AADP,CAApB;;AAIA,SAASC,eAAT,CAAyBC,KAAzB,EAAgC;AAC5B,SAAO;AACHV,IAAAA,IAAI,EAAEU,KAAK,CAACV;AADT,GAAP;AAGH;;AAED,eAAezD,OAAO,CAACC,OAAO,CAACiE,eAAD,EAAkB,EAAlB,EAAsB,IAAtB,CAAR,CAAP,CAA4CrC,OAA5C,CAAf","sourcesContent":["import React from 'react'\nimport { compose } from \"recompose\";\nimport { connect } from \"react-redux\";\nimport PropTypes from \"prop-types\";\nimport axios from \"axios\";\nimport jwt_decode from \"jwt-decode\";\nimport {\n    Container,\n    Grid,\n    makeStyles,\n} from '@material-ui/core';\n\n\nimport setAuthToken from \"../../../../utils/setAuthToken\";\nimport { setCurrentUser } from \"../../../../actions/authActions\";\nimport store from \"../../../../store\";\n\nimport Header from '../../components/Header/Header';\nimport HeaderLinksOut from '../../components/Header/HeaderLinksOut';\nimport Resume from './Resume';\nimport ProfileDetails from './ProfileDetails';\nimport ProfileComponent from './ProfileComponent';\nimport ProfileForm from './ProfileForm';\nimport { useHistory } from 'react-router-dom';\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        backgroundColor: theme.palette.background.dark,\n        minHeight: '100%',\n        paddingBottom: theme.spacing(3),\n        paddingTop: theme.spacing(3),\n    }\n}));\n\nconst Profile = (props) => {\n\n    const classes = useStyles();\n    const history = useHistory();\n\n    const [profData, setProfData] = React.useState({})\n\n    console.log(\"This is props\", props)\n\n\n    React.useEffect(() => {\n        // Check for token\n        if (localStorage.jwtToken) {\n            // Set auth token header auth\n            console.log(\"in effect\", localStorage.jwtToken);\n            setAuthToken(localStorage.jwtToken);\n            // Decode token and get user info and exp\n            const decoded = jwt_decode(localStorage.jwtToken);\n            console.log(\"in effect decoded\", decoded);\n            // Set user and isAuthenticated\n            store.dispatch(setCurrentUser(decoded));\n\n            axios({\n                method: \"get\",\n                url: \"http://localhost:5000/api/profile/\" + decoded.id,\n            })\n                .then(function (response) {\n                    //handle success\n                    console.log(response);\n                    setProfData(response.data.payload)\n\n                })\n                .catch(function (error) {\n                    //handle error\n                    console.log(error);\n                });\n\n            // Check for expired token\n            const currentTime = Date.now() / 1000;\n            if (decoded.exp < currentTime) {\n                console.log(\"Session Expired\")\n                // Redirect to login\n                // window.location.href = \"/login\";\n            }\n        }\n        else {\n            history.replace('/')\n        }\n\n    }, [localStorage.jwtToken])\n\n\n    return (\n        <>\n            {props.auth.isAuthenticated ? <HeaderLinksOut user={props.auth.user} /> : <Header />}\n            <div className={classes.root}>\n                {parseInt(props.auth.user.profstatus) ?\n\n                    <Container maxWidth=\"lg\">\n                        <Grid\n                            container\n                            spacing={3}\n                        >\n                            <Grid\n                                item\n                                lg={6}\n                                md={6}\n                                xs={12}\n                            >\n                                <ProfileComponent user={profData} />\n                            </Grid>\n                            <Grid\n                                item\n                                lg={6}\n                                md={6}\n                                xs={12}\n                            >\n                                <ProfileDetails user={profData} />\n                            </Grid>\n                            <Grid\n                                item\n                                lg={12}\n                                md={12}\n                                xs={12}\n                            >\n                                <Resume u_resume={profData.u_resume} />\n                            </Grid>\n\n                        </Grid>\n                    </Container>\n\n                    :\n                    <Container maxWidth=\"lg\">\n                        <Grid\n                            container\n                            spacing={3}\n                        >\n                            <Grid\n                                item\n                                lg={12}\n                                md={12}\n                                xs={12}\n                            >\n                                <ProfileForm id={props.auth.user.id} />\n                            </Grid>\n                        </Grid>\n                    </Container>\n\n                }\n            </div>\n        </>\n    )\n}\n\n\n\nProfile.propTypes = {\n    auth: PropTypes.object.isRequired\n};\n\nfunction mapStateToProps(state) {\n    return {\n        auth: state.auth,\n    }\n}\n\nexport default compose(connect(mapStateToProps, {}, null))(Profile);"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\Adam\\\\Documents\\\\PACE\\\\Fall 2020 - Semester 4\\\\CS 691 - Computer Science Project I\\\\jobster-master\\\\jobster-master\\\\code\\\\client\\\\src\\\\views\\\\Partner\\\\components\\\\Header.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport { AppBar, Toolbar, makeStyles, IconButton, Typography, MenuItem, Menu } from '@material-ui/core';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport AccountCircle from '@material-ui/icons/AccountCircle';\nimport { useHistory } from 'react-router-dom';\nimport { compose } from \"recompose\";\nimport { connect } from \"react-redux\";\nimport PropTypes from \"prop-types\";\nimport { setCurrentPartner, logoutPartner } from \"../../../actions/authActions\";\nimport setAuthToken from \"../../../utils/setAuthToken\";\nimport jwt_decode from \"jwt-decode\";\nimport store from \"../../../store\";\nconst useStyles = makeStyles(theme => ({\n  root: {\n    flexGrow: 1\n  },\n  menuButton: {\n    marginRight: theme.spacing(2)\n  },\n  title: {\n    flexGrow: 1\n  }\n}));\n\nfunction Header(props) {\n  _s();\n\n  const classes = useStyles();\n  const [anchorEl, setAnchorEl] = React.useState(null);\n  const open = Boolean(anchorEl);\n  const history = useHistory();\n\n  const handleMenu = event => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  const handleLogout = () => {\n    store.dispatch(logoutPartner());\n  };\n\n  React.useEffect(() => {// let token = JSON.parse(localStorage.getItem('a_jwtToken'))\n    // if (token) {\n    //     setAuth(1)\n    // }\n    // else {\n    // }\n  }, []);\n  React.useEffect(() => {\n    // Check for token\n    if (localStorage.pt_jwtToken) {\n      // Set auth token header auth\n      console.log(\"in effect\", localStorage.pt_jwtToken);\n      setAuthToken(localStorage.pt_jwtToken); // Decode token and get user info and exp\n\n      const decoded = jwt_decode(localStorage.pt_jwtToken);\n      console.log(\"in effect decoded\", decoded); // Set user and isAuthenticated\n\n      store.dispatch(setCurrentPartner(decoded)); // Check for expired token\n\n      const currentTime = Date.now() / 1000;\n\n      if (decoded.exp < currentTime) {\n        //console.log(\"App.js is running inside if and if\")\n        // Logout user\n        //store.dispatch(logoutUser());\n        // TODO: Clear current Profile\n        console.log(\"Session Expired\"); // Redirect to login\n        // window.location.href = \"/login\";\n      }\n    } else {\n      history.replace('/partner');\n    }\n  }, [localStorage.pt_jwtToken]);\n  return /*#__PURE__*/_jsxDEV(AppBar, {\n    style: {\n      background: '#2867B2'\n    },\n    position: \"static\",\n    children: /*#__PURE__*/_jsxDEV(Toolbar, {\n      children: [/*#__PURE__*/_jsxDEV(IconButton, {\n        onClick: () => history.replace('/partner'),\n        edge: \"start\",\n        className: classes.menuButton,\n        color: \"inherit\",\n        \"aria-label\": \"menu\",\n        children: /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h6\",\n          className: classes.title,\n          children: \"Jobster\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h6\",\n        className: classes.title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 17\n      }, this), true && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(IconButton, {\n          \"aria-label\": \"account of current user\",\n          \"aria-controls\": \"menu-appbar\",\n          \"aria-haspopup\": \"true\",\n          onClick: handleMenu,\n          color: \"inherit\",\n          children: /*#__PURE__*/_jsxDEV(AccountCircle, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(Menu, {\n          id: \"menu-appbar\",\n          anchorEl: anchorEl,\n          anchorOrigin: {\n            vertical: 'top',\n            horizontal: 'right'\n          },\n          keepMounted: true,\n          transformOrigin: {\n            vertical: 'top',\n            horizontal: 'right'\n          },\n          open: open,\n          onClose: handleClose,\n          children: [/*#__PURE__*/_jsxDEV(MenuItem, {\n            onClick: () => history.replace('/p-profile'),\n            children: \"Profile\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n            onClick: () => history.replace('/p-account'),\n            children: \"Account\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n            onClick: handleLogout,\n            children: \"Logout\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 89,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Header, \"IbrAjCkameJE9G//keiLbSp8dug=\", false, function () {\n  return [useStyles, useHistory];\n});\n\n_c = Header;\nHeader.propTypes = {\n  auth: PropTypes.object.isRequired\n};\n\nfunction mapStateToProps(state) {\n  return {\n    auth: state.auth\n  };\n}\n\nexport default compose(connect(mapStateToProps, {}, null))(Header);\n\nvar _c;\n\n$RefreshReg$(_c, \"Header\");","map":{"version":3,"sources":["C:/Users/Adam/Documents/PACE/Fall 2020 - Semester 4/CS 691 - Computer Science Project I/jobster-master/jobster-master/code/client/src/views/Partner/components/Header.js"],"names":["React","AppBar","Toolbar","makeStyles","IconButton","Typography","MenuItem","Menu","MenuIcon","AccountCircle","useHistory","compose","connect","PropTypes","setCurrentPartner","logoutPartner","setAuthToken","jwt_decode","store","useStyles","theme","root","flexGrow","menuButton","marginRight","spacing","title","Header","props","classes","anchorEl","setAnchorEl","useState","open","Boolean","history","handleMenu","event","currentTarget","handleClose","handleLogout","dispatch","useEffect","localStorage","pt_jwtToken","console","log","decoded","currentTime","Date","now","exp","replace","background","vertical","horizontal","propTypes","auth","object","isRequired","mapStateToProps","state"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { AppBar, Toolbar, makeStyles, IconButton, Typography, MenuItem, Menu } from '@material-ui/core'\n\nimport MenuIcon from '@material-ui/icons/Menu';\nimport AccountCircle from '@material-ui/icons/AccountCircle';\n\nimport { useHistory } from 'react-router-dom';\nimport { compose } from \"recompose\";\nimport { connect } from \"react-redux\";\nimport PropTypes from \"prop-types\";\nimport { setCurrentPartner, logoutPartner } from \"../../../actions/authActions\";\nimport setAuthToken from \"../../../utils/setAuthToken\";\nimport jwt_decode from \"jwt-decode\";\nimport store from \"../../../store\";\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        flexGrow: 1,\n    },\n    menuButton: {\n        marginRight: theme.spacing(2),\n    },\n    title: {\n        flexGrow: 1,\n    },\n}));\n\nfunction Header(props) {\n\n    const classes = useStyles();\n    const [anchorEl, setAnchorEl] = React.useState(null);\n    const open = Boolean(anchorEl);\n\n    const history = useHistory();\n\n    const handleMenu = (event) => {\n        setAnchorEl(event.currentTarget);\n    };\n\n    const handleClose = () => {\n        setAnchorEl(null);\n    };\n\n    const handleLogout = () => {\n        store.dispatch(logoutPartner());\n    }\n\n\n    React.useEffect(() => {\n        // let token = JSON.parse(localStorage.getItem('a_jwtToken'))\n        // if (token) {\n        //     setAuth(1)\n        // }\n        // else {\n\n        // }\n    }, [])\n\n    React.useEffect(() => {\n        // Check for token\n        if (localStorage.pt_jwtToken) {\n            // Set auth token header auth\n            console.log(\"in effect\", localStorage.pt_jwtToken);\n            setAuthToken(localStorage.pt_jwtToken);\n            // Decode token and get user info and exp\n            const decoded = jwt_decode(localStorage.pt_jwtToken);\n            console.log(\"in effect decoded\", decoded);\n            // Set user and isAuthenticated\n            store.dispatch(setCurrentPartner(decoded));\n\n            // Check for expired token\n            const currentTime = Date.now() / 1000;\n            if (decoded.exp < currentTime) {\n                //console.log(\"App.js is running inside if and if\")\n                // Logout user\n                //store.dispatch(logoutUser());\n                // TODO: Clear current Profile\n                console.log(\"Session Expired\")\n                // Redirect to login\n                // window.location.href = \"/login\";\n            }\n        }\n        else {\n            history.replace('/partner')\n        }\n    }, [localStorage.pt_jwtToken])\n\n    return (\n        <AppBar style={{ background: '#2867B2' }} position=\"static\">\n            <Toolbar>\n                <IconButton onClick={() => history.replace('/partner')} edge=\"start\" className={classes.menuButton} color=\"inherit\" aria-label=\"menu\">\n                    <Typography variant=\"h6\" className={classes.title}>\n                        Jobster\n                    </Typography>\n                </IconButton>\n                <Typography variant=\"h6\" className={classes.title}>\n\n                </Typography>\n                {true && (\n                    <div>\n                        <IconButton\n                            aria-label=\"account of current user\"\n                            aria-controls=\"menu-appbar\"\n                            aria-haspopup=\"true\"\n                            onClick={handleMenu}\n                            color=\"inherit\"\n                        >\n                            <AccountCircle />\n                        </IconButton>\n                        <Menu\n                            id=\"menu-appbar\"\n                            anchorEl={anchorEl}\n                            anchorOrigin={{\n                                vertical: 'top',\n                                horizontal: 'right',\n                            }}\n                            keepMounted\n                            transformOrigin={{\n                                vertical: 'top',\n                                horizontal: 'right',\n                            }}\n                            open={open}\n                            onClose={handleClose}\n                        >\n                            <MenuItem onClick={() => history.replace('/p-profile')}>Profile</MenuItem>\n                            <MenuItem onClick={() => history.replace('/p-account')}>Account</MenuItem>\n                            <MenuItem onClick={handleLogout}>Logout</MenuItem>\n                        </Menu>\n                    </div>\n                )}\n            </Toolbar>\n        </AppBar>\n    )\n}\n\n\nHeader.propTypes = {\n    auth: PropTypes.object.isRequired\n};\n\nfunction mapStateToProps(state) {\n    return {\n        auth: state.auth,\n    }\n}\n\nexport default compose(connect(mapStateToProps, {}, null))(Header);"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\Adam\\\\Documents\\\\PACE\\\\Fall 2020 - Semester 4\\\\CS 691 - Computer Science Project I\\\\jobster-master\\\\jobster-master\\\\code\\\\client\\\\src\\\\views\\\\Partner\\\\components\\\\Login\\\\PartnerLogin.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport Avatar from '@material-ui/core/Avatar';\nimport Button from '@material-ui/core/Button';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport TextField from '@material-ui/core/TextField';\nimport Link from '@material-ui/core/Link';\nimport Paper from '@material-ui/core/Paper';\nimport Box from '@material-ui/core/Box';\nimport Grid from '@material-ui/core/Grid';\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Formik, ErrorMessage } from 'formik';\nimport { Visibility, VisibilityOff } from \"@material-ui/icons\"; // @material-ui/core components\n\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\nimport IconButton from '@material-ui/core/IconButton';\nimport { PartnerLoginSchema } from '../../../../validation/Validations';\nimport { compose } from \"recompose\";\nimport { connect } from \"react-redux\";\nimport PropTypes from \"prop-types\";\nimport { asyncPartnerLogin, setCurrentPartner } from \"../../../../actions/authActions\";\nimport { useHistory } from 'react-router-dom';\nimport setAuthToken from \"../../../../utils/setAuthToken\";\nimport jwt_decode from \"jwt-decode\";\nimport store from \"../../../../store\";\n\nfunction Copyright() {\n  return /*#__PURE__*/_jsxDEV(Typography, {\n    variant: \"body2\",\n    color: \"textSecondary\",\n    align: \"center\",\n    children: ['Copyright © ', /*#__PURE__*/_jsxDEV(Link, {\n      color: \"inherit\",\n      children: \"Jobster\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 13\n    }, this), ' ', new Date().getFullYear(), '.']\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 39,\n    columnNumber: 9\n  }, this);\n}\n\n_c = Copyright;\nconst useStyles = makeStyles(theme => ({\n  root: {\n    height: '100vh'\n  },\n  image: {\n    backgroundImage: 'url(https://images.unsplash.com/photo-1593642632559-0c6d3fc62b89?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1050&q=80)',\n    backgroundRepeat: 'no-repeat',\n    backgroundColor: theme.palette.type === 'light' ? theme.palette.grey[50] : theme.palette.grey[900],\n    backgroundSize: 'cover',\n    backgroundPosition: 'center'\n  },\n  paper: {\n    margin: theme.spacing(8, 4),\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center'\n  },\n  avatar: {\n    margin: theme.spacing(1),\n    backgroundColor: theme.palette.secondary.main\n  },\n  form: {\n    width: '100%',\n    // Fix IE 11 issue.\n    marginTop: theme.spacing(1)\n  },\n  submit: {\n    margin: theme.spacing(3, 0, 2)\n  }\n}));\n\nfunction PartnerLogin(props) {\n  _s();\n\n  const history = useHistory();\n  const classes = useStyles();\n  const [visible, setVisible] = React.useState({\n    showPassword: false\n  });\n\n  const handleClickShowPassword = () => {\n    setVisible({ ...visible,\n      showPassword: !visible.showPassword\n    });\n  };\n\n  const handleMouseDownPassword = event => {\n    event.preventDefault();\n  };\n\n  React.useEffect(() => {\n    // Check for token\n    if (localStorage.pt_jwtToken) {\n      // Set auth token header auth\n      console.log(\"in effect\", localStorage.pt_jwtToken);\n      setAuthToken(localStorage.pt_jwtToken); // Decode token and get user info and exp\n\n      const decoded = jwt_decode(localStorage.pt_jwtToken);\n      console.log(\"in effect decoded\", decoded); // Set user and isAuthenticated\n\n      store.dispatch(setCurrentPartner(decoded)); // Check for expired token\n\n      const currentTime = Date.now() / 1000;\n\n      if (decoded.exp < currentTime) {\n        //console.log(\"App.js is running inside if and if\")\n        // Logout user\n        //store.dispatch(logoutUser());\n        // TODO: Clear current Profile\n        console.log(\"Session Expired\"); // Redirect to login\n        // window.location.href = \"/login\";\n      }\n    }\n  }, []);\n  React.useEffect(() => {\n    console.log(\"props\", props);\n\n    if (props.auth.isAuthenticated) {\n      history.push(\"/p-dashboard\");\n    }\n  });\n  return /*#__PURE__*/_jsxDEV(Grid, {\n    container: true,\n    component: \"main\",\n    className: classes.root,\n    children: [/*#__PURE__*/_jsxDEV(CssBaseline, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Grid, {\n      item: true,\n      xs: false,\n      sm: 4,\n      md: 7,\n      className: classes.image\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Grid, {\n      item: true,\n      xs: 12,\n      sm: 8,\n      md: 5,\n      component: Paper,\n      elevation: 6,\n      square: true,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.paper,\n        children: [/*#__PURE__*/_jsxDEV(Avatar, {\n          className: classes.avatar,\n          children: /*#__PURE__*/_jsxDEV(LockOutlinedIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          component: \"h1\",\n          variant: \"h5\",\n          children: \"Sign in\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Formik, {\n          initialValues: {\n            email: '',\n            password: ''\n          },\n          validationSchema: PartnerLoginSchema,\n          onSubmit: (values, actions) => {\n            console.log(\"props\", values);\n            props.asyncPartnerLogin(values).then(res => {\n              actions.setErrors(res);\n              actions.setSubmitting(false);\n              console.log(\"response\", res);\n\n              if (res.error) {\n                console.log(\"error in login\", res.error);\n              }\n            });\n          },\n          children: ({\n            values,\n            errors,\n            touched,\n            handleChange,\n            handleBlur,\n            handleSubmit,\n            isSubmitting\n            /* and other goodies */\n\n          }) => /*#__PURE__*/_jsxDEV(\"form\", {\n            className: classes.form,\n            onSubmit: handleSubmit,\n            noValidate: true,\n            children: [/*#__PURE__*/_jsxDEV(TextField, {\n              variant: \"outlined\",\n              margin: \"normal\",\n              required: true,\n              fullWidth: true,\n              id: \"email\",\n              label: \"Email Address\",\n              name: \"email\",\n              autoComplete: \"email\",\n              autoFocus: true,\n              onChange: handleChange,\n              onBlur: handleBlur,\n              value: values.email\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 171,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(ErrorMessage, {\n              name: \"email\",\n              render: msg => /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  color: '#fc2403'\n                },\n                children: msg\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 185,\n                columnNumber: 79\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 185,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(TextField, {\n              variant: \"outlined\",\n              margin: \"normal\",\n              required: true,\n              fullWidth: true,\n              name: \"password\",\n              label: \"Password\",\n              type: visible.showPassword ? 'text' : 'password',\n              id: \"password\",\n              onChange: handleChange,\n              onBlur: handleBlur,\n              value: values.password,\n              autoComplete: \"new-password\",\n              InputProps: {\n                endAdornment: /*#__PURE__*/_jsxDEV(InputAdornment, {\n                  position: \"end\",\n                  children: /*#__PURE__*/_jsxDEV(IconButton, {\n                    \"aria-label\": \"toggle password visibility\",\n                    onClick: handleClickShowPassword,\n                    onMouseDown: handleMouseDownPassword,\n                    children: visible.showPassword ? /*#__PURE__*/_jsxDEV(Visibility, {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 207,\n                      columnNumber: 81\n                    }, this) : /*#__PURE__*/_jsxDEV(VisibilityOff, {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 207,\n                      columnNumber: 98\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 202,\n                    columnNumber: 53\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 201,\n                  columnNumber: 49\n                }, this)\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 186,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(ErrorMessage, {\n              name: \"password\",\n              render: msg => /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  color: '#fc2403'\n                },\n                children: msg\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 213,\n                columnNumber: 82\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 213,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              type: \"submit\",\n              fullWidth: true,\n              variant: \"contained\",\n              color: \"primary\",\n              className: classes.submit,\n              children: \"Sign In\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 214,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(Grid, {\n              container: true,\n              justify: \"center\",\n              children: /*#__PURE__*/_jsxDEV(Grid, {\n                item: true,\n                children: /*#__PURE__*/_jsxDEV(Link, {\n                  href: \"/p-signup\",\n                  variant: \"body2\",\n                  children: \"Don't have an account? Sign Up\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 225,\n                  columnNumber: 45\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 224,\n                columnNumber: 41\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 223,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(Box, {\n              mt: 5,\n              children: /*#__PURE__*/_jsxDEV(Copyright, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 231,\n                columnNumber: 41\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 230,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 170,\n            columnNumber: 33\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 132,\n    columnNumber: 9\n  }, this);\n}\n\n_s(PartnerLogin, \"j+HUX6KB+3dvmr6vTqSZTI1FbJ4=\", false, function () {\n  return [useHistory, useStyles];\n});\n\n_c2 = PartnerLogin;\nPartnerLogin.propTypes = {\n  asyncPartnerLogin: PropTypes.func.isRequired,\n  auth: PropTypes.object.isRequired\n};\n\nfunction mapStateToProps(state) {\n  return {\n    auth: state.auth\n  };\n}\n\nexport default compose(connect(mapStateToProps, {\n  asyncPartnerLogin\n}, null))(PartnerLogin);\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"Copyright\");\n$RefreshReg$(_c2, \"PartnerLogin\");","map":{"version":3,"sources":["C:/Users/Adam/Documents/PACE/Fall 2020 - Semester 4/CS 691 - Computer Science Project I/jobster-master/jobster-master/code/client/src/views/Partner/components/Login/PartnerLogin.js"],"names":["React","Avatar","Button","CssBaseline","TextField","Link","Paper","Box","Grid","LockOutlinedIcon","Typography","makeStyles","Formik","ErrorMessage","Visibility","VisibilityOff","InputAdornment","IconButton","PartnerLoginSchema","compose","connect","PropTypes","asyncPartnerLogin","setCurrentPartner","useHistory","setAuthToken","jwt_decode","store","Copyright","Date","getFullYear","useStyles","theme","root","height","image","backgroundImage","backgroundRepeat","backgroundColor","palette","type","grey","backgroundSize","backgroundPosition","paper","margin","spacing","display","flexDirection","alignItems","avatar","secondary","main","form","width","marginTop","submit","PartnerLogin","props","history","classes","visible","setVisible","useState","showPassword","handleClickShowPassword","handleMouseDownPassword","event","preventDefault","useEffect","localStorage","pt_jwtToken","console","log","decoded","dispatch","currentTime","now","exp","auth","isAuthenticated","push","email","password","values","actions","then","res","setErrors","setSubmitting","error","errors","touched","handleChange","handleBlur","handleSubmit","isSubmitting","msg","color","endAdornment","propTypes","func","isRequired","object","mapStateToProps","state"],"mappings":";;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,0BAAnB;AACA,OAAOC,MAAP,MAAmB,0BAAnB;AACA,OAAOC,WAAP,MAAwB,+BAAxB;AACA,OAAOC,SAAP,MAAsB,6BAAtB;AACA,OAAOC,IAAP,MAAiB,wBAAjB;AACA,OAAOC,KAAP,MAAkB,yBAAlB;AACA,OAAOC,GAAP,MAAgB,uBAAhB;AACA,OAAOC,IAAP,MAAiB,wBAAjB;AACA,OAAOC,gBAAP,MAA6B,iCAA7B;AACA,OAAOC,UAAP,MAAuB,8BAAvB;AACA,SAASC,UAAT,QAA2B,0BAA3B;AAEA,SAASC,MAAT,EAAiBC,YAAjB,QAAqC,QAArC;AACA,SAASC,UAAT,EAAqBC,aAArB,QAA0C,oBAA1C,C,CAEA;;AAEA,OAAOC,cAAP,MAA2B,kCAA3B;AACA,OAAOC,UAAP,MAAuB,8BAAvB;AAEA,SAASC,kBAAT,QAAmC,oCAAnC;AAEA,SAASC,OAAT,QAAwB,WAAxB;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,SAASC,iBAAT,EAA4BC,iBAA5B,QAAqD,iCAArD;AACA,SAASC,UAAT,QAA2B,kBAA3B;AAGA,OAAOC,YAAP,MAAyB,gCAAzB;AACA,OAAOC,UAAP,MAAuB,YAAvB;AACA,OAAOC,KAAP,MAAkB,mBAAlB;;AAIA,SAASC,SAAT,GAAqB;AACjB,sBACI,QAAC,UAAD;AAAY,IAAA,OAAO,EAAC,OAApB;AAA4B,IAAA,KAAK,EAAC,eAAlC;AAAkD,IAAA,KAAK,EAAC,QAAxD;AAAA,eACK,cADL,eAEI,QAAC,IAAD;AAAM,MAAA,KAAK,EAAC,SAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAFJ,EAIM,GAJN,EAKK,IAAIC,IAAJ,GAAWC,WAAX,EALL,EAMK,GANL;AAAA;AAAA;AAAA;AAAA;AAAA,UADJ;AAUH;;KAXQF,S;AAaT,MAAMG,SAAS,GAAGpB,UAAU,CAAEqB,KAAD,KAAY;AACrCC,EAAAA,IAAI,EAAE;AACFC,IAAAA,MAAM,EAAE;AADN,GAD+B;AAIrCC,EAAAA,KAAK,EAAE;AACHC,IAAAA,eAAe,EAAE,6IADd;AAEHC,IAAAA,gBAAgB,EAAE,WAFf;AAGHC,IAAAA,eAAe,EACXN,KAAK,CAACO,OAAN,CAAcC,IAAd,KAAuB,OAAvB,GAAiCR,KAAK,CAACO,OAAN,CAAcE,IAAd,CAAmB,EAAnB,CAAjC,GAA0DT,KAAK,CAACO,OAAN,CAAcE,IAAd,CAAmB,GAAnB,CAJ3D;AAKHC,IAAAA,cAAc,EAAE,OALb;AAMHC,IAAAA,kBAAkB,EAAE;AANjB,GAJ8B;AAYrCC,EAAAA,KAAK,EAAE;AACHC,IAAAA,MAAM,EAAEb,KAAK,CAACc,OAAN,CAAc,CAAd,EAAiB,CAAjB,CADL;AAEHC,IAAAA,OAAO,EAAE,MAFN;AAGHC,IAAAA,aAAa,EAAE,QAHZ;AAIHC,IAAAA,UAAU,EAAE;AAJT,GAZ8B;AAkBrCC,EAAAA,MAAM,EAAE;AACJL,IAAAA,MAAM,EAAEb,KAAK,CAACc,OAAN,CAAc,CAAd,CADJ;AAEJR,IAAAA,eAAe,EAAEN,KAAK,CAACO,OAAN,CAAcY,SAAd,CAAwBC;AAFrC,GAlB6B;AAsBrCC,EAAAA,IAAI,EAAE;AACFC,IAAAA,KAAK,EAAE,MADL;AACa;AACfC,IAAAA,SAAS,EAAEvB,KAAK,CAACc,OAAN,CAAc,CAAd;AAFT,GAtB+B;AA0BrCU,EAAAA,MAAM,EAAE;AACJX,IAAAA,MAAM,EAAEb,KAAK,CAACc,OAAN,CAAc,CAAd,EAAiB,CAAjB,EAAoB,CAApB;AADJ;AA1B6B,CAAZ,CAAD,CAA5B;;AA+BA,SAASW,YAAT,CAAsBC,KAAtB,EAA6B;AAAA;;AACzB,QAAMC,OAAO,GAAGnC,UAAU,EAA1B;AAEA,QAAMoC,OAAO,GAAG7B,SAAS,EAAzB;AAEA,QAAM,CAAC8B,OAAD,EAAUC,UAAV,IAAwB9D,KAAK,CAAC+D,QAAN,CAAe;AACzCC,IAAAA,YAAY,EAAE;AAD2B,GAAf,CAA9B;;AAIA,QAAMC,uBAAuB,GAAG,MAAM;AAClCH,IAAAA,UAAU,CAAC,EAAE,GAAGD,OAAL;AAAcG,MAAAA,YAAY,EAAE,CAACH,OAAO,CAACG;AAArC,KAAD,CAAV;AACH,GAFD;;AAGA,QAAME,uBAAuB,GAAIC,KAAD,IAAW;AACvCA,IAAAA,KAAK,CAACC,cAAN;AACH,GAFD;;AAIApE,EAAAA,KAAK,CAACqE,SAAN,CAAgB,MAAM;AAClB;AACA,QAAIC,YAAY,CAACC,WAAjB,EAA8B;AAC1B;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ,EAAyBH,YAAY,CAACC,WAAtC;AACA9C,MAAAA,YAAY,CAAC6C,YAAY,CAACC,WAAd,CAAZ,CAH0B,CAI1B;;AACA,YAAMG,OAAO,GAAGhD,UAAU,CAAC4C,YAAY,CAACC,WAAd,CAA1B;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ,EAAiCC,OAAjC,EAN0B,CAO1B;;AACA/C,MAAAA,KAAK,CAACgD,QAAN,CAAepD,iBAAiB,CAACmD,OAAD,CAAhC,EAR0B,CAU1B;;AACA,YAAME,WAAW,GAAG/C,IAAI,CAACgD,GAAL,KAAa,IAAjC;;AACA,UAAIH,OAAO,CAACI,GAAR,GAAcF,WAAlB,EAA+B;AAC3B;AACA;AACA;AACA;AACAJ,QAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ,EAL2B,CAM3B;AACA;AACH;AACJ;AACJ,GAxBD,EAwBG,EAxBH;AA0BAzE,EAAAA,KAAK,CAACqE,SAAN,CAAgB,MAAM;AAClBG,IAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqBf,KAArB;;AACA,QAAIA,KAAK,CAACqB,IAAN,CAAWC,eAAf,EAAgC;AAC5BrB,MAAAA,OAAO,CAACsB,IAAR,CAAa,cAAb;AACH;AACJ,GALD;AAQA,sBACI,QAAC,IAAD;AAAM,IAAA,SAAS,MAAf;AAAgB,IAAA,SAAS,EAAC,MAA1B;AAAiC,IAAA,SAAS,EAAErB,OAAO,CAAC3B,IAApD;AAAA,4BACI,QAAC,WAAD;AAAA;AAAA;AAAA;AAAA,YADJ,eAEI,QAAC,IAAD;AAAM,MAAA,IAAI,MAAV;AAAW,MAAA,EAAE,EAAE,KAAf;AAAsB,MAAA,EAAE,EAAE,CAA1B;AAA6B,MAAA,EAAE,EAAE,CAAjC;AAAoC,MAAA,SAAS,EAAE2B,OAAO,CAACzB;AAAvD;AAAA;AAAA;AAAA;AAAA,YAFJ,eAGI,QAAC,IAAD;AAAM,MAAA,IAAI,MAAV;AAAW,MAAA,EAAE,EAAE,EAAf;AAAmB,MAAA,EAAE,EAAE,CAAvB;AAA0B,MAAA,EAAE,EAAE,CAA9B;AAAiC,MAAA,SAAS,EAAE7B,KAA5C;AAAmD,MAAA,SAAS,EAAE,CAA9D;AAAiE,MAAA,MAAM,MAAvE;AAAA,6BACI;AAAK,QAAA,SAAS,EAAEsD,OAAO,CAAChB,KAAxB;AAAA,gCACI,QAAC,MAAD;AAAQ,UAAA,SAAS,EAAEgB,OAAO,CAACV,MAA3B;AAAA,iCACI,QAAC,gBAAD;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,gBADJ,eAII,QAAC,UAAD;AAAY,UAAA,SAAS,EAAC,IAAtB;AAA2B,UAAA,OAAO,EAAC,IAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAJJ,eAOI,QAAC,MAAD;AACI,UAAA,aAAa,EAAE;AAAEgC,YAAAA,KAAK,EAAE,EAAT;AAAaC,YAAAA,QAAQ,EAAE;AAAvB,WADnB;AAEI,UAAA,gBAAgB,EAAEjE,kBAFtB;AAGI,UAAA,QAAQ,EAAE,CAACkE,MAAD,EAASC,OAAT,KAAqB;AAC3Bb,YAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqBW,MAArB;AAEA1B,YAAAA,KAAK,CAACpC,iBAAN,CAAwB8D,MAAxB,EACKE,IADL,CACUC,GAAG,IAAI;AACTF,cAAAA,OAAO,CAACG,SAAR,CAAkBD,GAAlB;AACAF,cAAAA,OAAO,CAACI,aAAR,CAAsB,KAAtB;AACAjB,cAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwBc,GAAxB;;AACA,kBAAIA,GAAG,CAACG,KAAR,EAAe;AACXlB,gBAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ,EAA8Bc,GAAG,CAACG,KAAlC;AACH;AACJ,aARL;AASH,WAfL;AAAA,oBAiBK,CAAC;AACEN,YAAAA,MADF;AAEEO,YAAAA,MAFF;AAGEC,YAAAA,OAHF;AAIEC,YAAAA,YAJF;AAKEC,YAAAA,UALF;AAMEC,YAAAA,YANF;AAOEC,YAAAA;AACA;;AARF,WAAD,kBAUO;AAAM,YAAA,SAAS,EAAEpC,OAAO,CAACP,IAAzB;AAA+B,YAAA,QAAQ,EAAE0C,YAAzC;AAAuD,YAAA,UAAU,MAAjE;AAAA,oCACI,QAAC,SAAD;AACI,cAAA,OAAO,EAAC,UADZ;AAEI,cAAA,MAAM,EAAC,QAFX;AAGI,cAAA,QAAQ,MAHZ;AAII,cAAA,SAAS,MAJb;AAKI,cAAA,EAAE,EAAC,OALP;AAMI,cAAA,KAAK,EAAC,eANV;AAOI,cAAA,IAAI,EAAC,OAPT;AAQI,cAAA,YAAY,EAAC,OARjB;AASI,cAAA,SAAS,MATb;AAUI,cAAA,QAAQ,EAAEF,YAVd;AAWI,cAAA,MAAM,EAAEC,UAXZ;AAYI,cAAA,KAAK,EAAEV,MAAM,CAACF;AAZlB;AAAA;AAAA;AAAA;AAAA,oBADJ,eAeI,QAAC,YAAD;AAAc,cAAA,IAAI,EAAC,OAAnB;AAA2B,cAAA,MAAM,EAAEe,GAAG,iBAAI;AAAK,gBAAA,KAAK,EAAE;AAAEC,kBAAAA,KAAK,EAAE;AAAT,iBAAZ;AAAA,0BAAmCD;AAAnC;AAAA;AAAA;AAAA;AAAA;AAA1C;AAAA;AAAA;AAAA;AAAA,oBAfJ,eAgBI,QAAC,SAAD;AACI,cAAA,OAAO,EAAC,UADZ;AAEI,cAAA,MAAM,EAAC,QAFX;AAGI,cAAA,QAAQ,MAHZ;AAII,cAAA,SAAS,MAJb;AAKI,cAAA,IAAI,EAAC,UALT;AAMI,cAAA,KAAK,EAAC,UANV;AAOI,cAAA,IAAI,EAAEpC,OAAO,CAACG,YAAR,GAAuB,MAAvB,GAAgC,UAP1C;AAQI,cAAA,EAAE,EAAC,UARP;AASI,cAAA,QAAQ,EAAE6B,YATd;AAUI,cAAA,MAAM,EAAEC,UAVZ;AAWI,cAAA,KAAK,EAAEV,MAAM,CAACD,QAXlB;AAYI,cAAA,YAAY,EAAC,cAZjB;AAaI,cAAA,UAAU,EAAE;AACRgB,gBAAAA,YAAY,eACR,QAAC,cAAD;AAAgB,kBAAA,QAAQ,EAAC,KAAzB;AAAA,yCACI,QAAC,UAAD;AACI,kCAAW,4BADf;AAEI,oBAAA,OAAO,EAAElC,uBAFb;AAGI,oBAAA,WAAW,EAAEC,uBAHjB;AAAA,8BAKKL,OAAO,CAACG,YAAR,gBAAuB,QAAC,UAAD;AAAA;AAAA;AAAA;AAAA,4BAAvB,gBAAwC,QAAC,aAAD;AAAA;AAAA;AAAA;AAAA;AAL7C;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AAFI;AAbhB;AAAA;AAAA;AAAA;AAAA,oBAhBJ,eA2CI,QAAC,YAAD;AAAc,cAAA,IAAI,EAAC,UAAnB;AAA8B,cAAA,MAAM,EAAEiC,GAAG,iBAAI;AAAK,gBAAA,KAAK,EAAE;AAAEC,kBAAAA,KAAK,EAAE;AAAT,iBAAZ;AAAA,0BAAmCD;AAAnC;AAAA;AAAA;AAAA;AAAA;AAA7C;AAAA;AAAA;AAAA;AAAA,oBA3CJ,eA4CI,QAAC,MAAD;AACI,cAAA,IAAI,EAAC,QADT;AAEI,cAAA,SAAS,MAFb;AAGI,cAAA,OAAO,EAAC,WAHZ;AAII,cAAA,KAAK,EAAC,SAJV;AAKI,cAAA,SAAS,EAAErC,OAAO,CAACJ,MALvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBA5CJ,eAqDI,QAAC,IAAD;AAAM,cAAA,SAAS,MAAf;AAAgB,cAAA,OAAO,EAAC,QAAxB;AAAA,qCACI,QAAC,IAAD;AAAM,gBAAA,IAAI,MAAV;AAAA,uCACI,QAAC,IAAD;AAAM,kBAAA,IAAI,EAAC,WAAX;AAAuB,kBAAA,OAAO,EAAC,OAA/B;AAAA,4BACK;AADL;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,oBArDJ,eA4DI,QAAC,GAAD;AAAK,cAAA,EAAE,EAAE,CAAT;AAAA,qCACI,QAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,oBA5DJ;AAAA;AAAA;AAAA;AAAA;AAAA;AA3BZ;AAAA;AAAA;AAAA;AAAA,gBAPJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,YAHJ;AAAA;AAAA;AAAA;AAAA;AAAA,UADJ;AA6GH;;GA/JQC,Y;UACWjC,U,EAEAO,S;;;MAHX0B,Y;AAiKTA,YAAY,CAAC2C,SAAb,GAAyB;AACrB9E,EAAAA,iBAAiB,EAAED,SAAS,CAACgF,IAAV,CAAeC,UADb;AAErBvB,EAAAA,IAAI,EAAE1D,SAAS,CAACkF,MAAV,CAAiBD;AAFF,CAAzB;;AAMA,SAASE,eAAT,CAAyBC,KAAzB,EAAgC;AAC5B,SAAO;AACH1B,IAAAA,IAAI,EAAE0B,KAAK,CAAC1B;AADT,GAAP;AAGH;;AAED,eAAe5D,OAAO,CAACC,OAAO,CAACoF,eAAD,EAAkB;AAAElF,EAAAA;AAAF,CAAlB,EAAyC,IAAzC,CAAR,CAAP,CAA+DmC,YAA/D,CAAf","sourcesContent":["import React from 'react';\nimport Avatar from '@material-ui/core/Avatar';\nimport Button from '@material-ui/core/Button';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport TextField from '@material-ui/core/TextField';\nimport Link from '@material-ui/core/Link';\nimport Paper from '@material-ui/core/Paper';\nimport Box from '@material-ui/core/Box';\nimport Grid from '@material-ui/core/Grid';\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport { Formik, ErrorMessage } from 'formik';\nimport { Visibility, VisibilityOff } from \"@material-ui/icons\";\n\n// @material-ui/core components\n\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\nimport IconButton from '@material-ui/core/IconButton';\n\nimport { PartnerLoginSchema } from '../../../../validation/Validations';\n\nimport { compose } from \"recompose\";\nimport { connect } from \"react-redux\";\nimport PropTypes from \"prop-types\";\nimport { asyncPartnerLogin, setCurrentPartner } from \"../../../../actions/authActions\";\nimport { useHistory } from 'react-router-dom';\n\n\nimport setAuthToken from \"../../../../utils/setAuthToken\";\nimport jwt_decode from \"jwt-decode\";\nimport store from \"../../../../store\";\n\n\n\nfunction Copyright() {\n    return (\n        <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">\n            {'Copyright © '}\n            <Link color=\"inherit\">\n                Jobster\n      </Link>{' '}\n            {new Date().getFullYear()}\n            {'.'}\n        </Typography>\n    );\n}\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        height: '100vh',\n    },\n    image: {\n        backgroundImage: 'url(https://images.unsplash.com/photo-1593642632559-0c6d3fc62b89?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1050&q=80)',\n        backgroundRepeat: 'no-repeat',\n        backgroundColor:\n            theme.palette.type === 'light' ? theme.palette.grey[50] : theme.palette.grey[900],\n        backgroundSize: 'cover',\n        backgroundPosition: 'center',\n    },\n    paper: {\n        margin: theme.spacing(8, 4),\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n    },\n    avatar: {\n        margin: theme.spacing(1),\n        backgroundColor: theme.palette.secondary.main,\n    },\n    form: {\n        width: '100%', // Fix IE 11 issue.\n        marginTop: theme.spacing(1),\n    },\n    submit: {\n        margin: theme.spacing(3, 0, 2),\n    },\n}));\n\nfunction PartnerLogin(props) {\n    const history = useHistory();\n\n    const classes = useStyles();\n\n    const [visible, setVisible] = React.useState({\n        showPassword: false,\n    });\n\n    const handleClickShowPassword = () => {\n        setVisible({ ...visible, showPassword: !visible.showPassword });\n    };\n    const handleMouseDownPassword = (event) => {\n        event.preventDefault();\n    };\n\n    React.useEffect(() => {\n        // Check for token\n        if (localStorage.pt_jwtToken) {\n            // Set auth token header auth\n            console.log(\"in effect\", localStorage.pt_jwtToken);\n            setAuthToken(localStorage.pt_jwtToken);\n            // Decode token and get user info and exp\n            const decoded = jwt_decode(localStorage.pt_jwtToken);\n            console.log(\"in effect decoded\", decoded);\n            // Set user and isAuthenticated\n            store.dispatch(setCurrentPartner(decoded));\n\n            // Check for expired token\n            const currentTime = Date.now() / 1000;\n            if (decoded.exp < currentTime) {\n                //console.log(\"App.js is running inside if and if\")\n                // Logout user\n                //store.dispatch(logoutUser());\n                // TODO: Clear current Profile\n                console.log(\"Session Expired\")\n                // Redirect to login\n                // window.location.href = \"/login\";\n            }\n        }\n    }, [])\n\n    React.useEffect(() => {\n        console.log(\"props\", props)\n        if (props.auth.isAuthenticated) {\n            history.push(\"/p-dashboard\");\n        }\n    });\n\n\n    return (\n        <Grid container component=\"main\" className={classes.root}>\n            <CssBaseline />\n            <Grid item xs={false} sm={4} md={7} className={classes.image} />\n            <Grid item xs={12} sm={8} md={5} component={Paper} elevation={6} square>\n                <div className={classes.paper}>\n                    <Avatar className={classes.avatar}>\n                        <LockOutlinedIcon />\n                    </Avatar>\n                    <Typography component=\"h1\" variant=\"h5\">\n                        Sign in\n                    </Typography>\n                    <Formik\n                        initialValues={{ email: '', password: '' }}\n                        validationSchema={PartnerLoginSchema}\n                        onSubmit={(values, actions) => {\n                            console.log(\"props\", values)\n\n                            props.asyncPartnerLogin(values)\n                                .then(res => {\n                                    actions.setErrors(res);\n                                    actions.setSubmitting(false);\n                                    console.log(\"response\", res);\n                                    if (res.error) {\n                                        console.log(\"error in login\", res.error)\n                                    }\n                                })\n                        }}\n                    >\n                        {({\n                            values,\n                            errors,\n                            touched,\n                            handleChange,\n                            handleBlur,\n                            handleSubmit,\n                            isSubmitting,\n                            /* and other goodies */\n                        }) => (\n                                <form className={classes.form} onSubmit={handleSubmit} noValidate>\n                                    <TextField\n                                        variant=\"outlined\"\n                                        margin=\"normal\"\n                                        required\n                                        fullWidth\n                                        id=\"email\"\n                                        label=\"Email Address\"\n                                        name=\"email\"\n                                        autoComplete=\"email\"\n                                        autoFocus\n                                        onChange={handleChange}\n                                        onBlur={handleBlur}\n                                        value={values.email}\n                                    />\n                                    <ErrorMessage name=\"email\" render={msg => <div style={{ color: '#fc2403' }}>{msg}</div>} />\n                                    <TextField\n                                        variant=\"outlined\"\n                                        margin=\"normal\"\n                                        required\n                                        fullWidth\n                                        name=\"password\"\n                                        label=\"Password\"\n                                        type={visible.showPassword ? 'text' : 'password'}\n                                        id=\"password\"\n                                        onChange={handleChange}\n                                        onBlur={handleBlur}\n                                        value={values.password}\n                                        autoComplete=\"new-password\"\n                                        InputProps={{\n                                            endAdornment:\n                                                <InputAdornment position=\"end\">\n                                                    <IconButton\n                                                        aria-label=\"toggle password visibility\"\n                                                        onClick={handleClickShowPassword}\n                                                        onMouseDown={handleMouseDownPassword}\n                                                    >\n                                                        {visible.showPassword ? <Visibility /> : <VisibilityOff />}\n                                                    </IconButton>\n                                                </InputAdornment>\n\n                                        }}\n                                    />\n                                    <ErrorMessage name=\"password\" render={msg => <div style={{ color: '#fc2403' }}>{msg}</div>} />\n                                    <Button\n                                        type=\"submit\"\n                                        fullWidth\n                                        variant=\"contained\"\n                                        color=\"primary\"\n                                        className={classes.submit}\n                                    >\n                                        Sign In\n                                    </Button>\n                                    <Grid container justify=\"center\">\n                                        <Grid item>\n                                            <Link href=\"/p-signup\" variant=\"body2\">\n                                                {\"Don't have an account? Sign Up\"}\n                                            </Link>\n                                        </Grid>\n                                    </Grid>\n                                    <Box mt={5}>\n                                        <Copyright />\n                                    </Box>\n                                </form>\n                            )}\n                    </Formik>\n                </div>\n            </Grid>\n        </Grid>\n    );\n}\n\nPartnerLogin.propTypes = {\n    asyncPartnerLogin: PropTypes.func.isRequired,\n    auth: PropTypes.object.isRequired\n};\n\n\nfunction mapStateToProps(state) {\n    return {\n        auth: state.auth,\n    }\n}\n\nexport default compose(connect(mapStateToProps, { asyncPartnerLogin }, null))(PartnerLogin);"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\Adam\\\\Documents\\\\PACE\\\\Fall 2020 - Semester 4\\\\CS 691 - Computer Science Project I\\\\jobster-master\\\\jobster-master\\\\code\\\\client\\\\src\\\\views\\\\Partner\\\\components\\\\Profile\\\\PartnerProfile.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport { compose } from \"recompose\";\nimport { connect } from \"react-redux\";\nimport PropTypes from \"prop-types\";\nimport axios from \"axios\";\nimport jwt_decode from \"jwt-decode\";\nimport { makeStyles, Container, Grid } from '@material-ui/core';\nimport { useHistory } from 'react-router-dom';\nimport setAuthToken from '../../../../utils/setAuthToken';\nimport { setCurrentPartner } from '../../../../actions/authActions';\nimport store from '../../../../store';\nimport Header from '../Header';\nimport Profileform from './ProfileForm';\nimport ProfileComponent from './ProfileComponent';\nimport PartnerCompanyProfile from './PartnerCompanyProfile';\nconst useStyles = makeStyles(theme => ({\n  root: {\n    backgroundColor: theme.palette.background.dark,\n    minHeight: '100%',\n    paddingBottom: theme.spacing(3),\n    paddingTop: theme.spacing(3)\n  }\n}));\n\nconst PartnerProfile = props => {\n  _s();\n\n  const classes = useStyles();\n  const history = useHistory();\n  const [profData, setProfData] = React.useState({});\n  React.useEffect(() => {\n    // Check for token\n    if (localStorage.pt_jwtToken) {\n      // Set auth token header auth\n      console.log(\"in effect\", localStorage.pt_jwtToken);\n      setAuthToken(localStorage.pt_jwtToken); // Decode token and get user info and exp\n\n      const decoded = jwt_decode(localStorage.pt_jwtToken);\n      console.log(\"in effect decoded\", decoded); // Set user and isAuthenticated\n\n      store.dispatch(setCurrentPartner(decoded));\n      axios({\n        method: \"get\",\n        url: \"http://localhost:5000/api/p-profile/\" + decoded.id\n      }).then(function (response) {\n        //handle success\n        console.log(response);\n        setProfData(response.data.payload);\n      }).catch(function (error) {\n        //handle error\n        console.log(error);\n      }); // Check for expired token\n\n      const currentTime = Date.now() / 1000;\n\n      if (decoded.exp < currentTime) {\n        console.log(\"Session Expired\"); // Redirect to login\n        // window.location.href = \"/login\";\n      }\n    } else {\n      history.replace('/partner');\n    }\n  }, [localStorage.pt_jwtToken]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.root,\n      children: props.auth.user.profstatus ? /*#__PURE__*/_jsxDEV(Container, {\n        maxWidth: \"lg\",\n        children: /*#__PURE__*/_jsxDEV(Grid, {\n          container: true,\n          spacing: 3,\n          children: [/*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            lg: 6,\n            md: 6,\n            xs: 12,\n            children: /*#__PURE__*/_jsxDEV(ProfileComponent, {\n              user: profData\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 102,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            lg: 6,\n            md: 6,\n            xs: 12,\n            children: /*#__PURE__*/_jsxDEV(PartnerCompanyProfile, {\n              user: profData\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 110,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 21\n      }, this) // <p>created already and shows profile</p>\n      :\n      /*#__PURE__*/\n      _jsxDEV(Container, {\n        maxWidth: \"lg\",\n        children: /*#__PURE__*/_jsxDEV(Grid, {\n          container: true,\n          spacing: 3,\n          children: /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            lg: 12,\n            md: 12,\n            xs: 12,\n            children: /*#__PURE__*/_jsxDEV(Profileform, {\n              id: props.auth.user.id\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 132,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n};\n\n_s(PartnerProfile, \"RogDNj8zlKRECE53oTsVbKKqeFs=\", false, function () {\n  return [useStyles, useHistory];\n});\n\n_c = PartnerProfile;\nPartnerProfile.propTypes = {\n  auth: PropTypes.object.isRequired\n};\n\nfunction mapStateToProps(state) {\n  return {\n    auth: state.auth\n  };\n}\n\nexport default compose(connect(mapStateToProps, {}, null))(PartnerProfile);\n\nvar _c;\n\n$RefreshReg$(_c, \"PartnerProfile\");","map":{"version":3,"sources":["C:/Users/Adam/Documents/PACE/Fall 2020 - Semester 4/CS 691 - Computer Science Project I/jobster-master/jobster-master/code/client/src/views/Partner/components/Profile/PartnerProfile.js"],"names":["React","compose","connect","PropTypes","axios","jwt_decode","makeStyles","Container","Grid","useHistory","setAuthToken","setCurrentPartner","store","Header","Profileform","ProfileComponent","PartnerCompanyProfile","useStyles","theme","root","backgroundColor","palette","background","dark","minHeight","paddingBottom","spacing","paddingTop","PartnerProfile","props","classes","history","profData","setProfData","useState","useEffect","localStorage","pt_jwtToken","console","log","decoded","dispatch","method","url","id","then","response","data","payload","catch","error","currentTime","Date","now","exp","replace","auth","user","profstatus","propTypes","object","isRequired","mapStateToProps","state"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { compose } from \"recompose\";\nimport { connect } from \"react-redux\";\nimport PropTypes from \"prop-types\";\nimport axios from \"axios\";\nimport jwt_decode from \"jwt-decode\";\nimport {\n    makeStyles,\n    Container,\n    Grid\n} from '@material-ui/core';\nimport { useHistory } from 'react-router-dom';\nimport setAuthToken from '../../../../utils/setAuthToken';\nimport { setCurrentPartner } from '../../../../actions/authActions'\nimport store from '../../../../store'\nimport Header from '../Header';\nimport Profileform from './ProfileForm';\nimport ProfileComponent from './ProfileComponent';\nimport PartnerCompanyProfile from './PartnerCompanyProfile';\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        backgroundColor: theme.palette.background.dark,\n        minHeight: '100%',\n        paddingBottom: theme.spacing(3),\n        paddingTop: theme.spacing(3),\n    }\n\n}));\n\nconst PartnerProfile = (props) => {\n\n    const classes = useStyles();\n    const history = useHistory();\n\n    const [profData, setProfData] = React.useState({})\n\n    React.useEffect(() => {\n        // Check for token\n        if (localStorage.pt_jwtToken) {\n            // Set auth token header auth\n            console.log(\"in effect\", localStorage.pt_jwtToken);\n            setAuthToken(localStorage.pt_jwtToken);\n            // Decode token and get user info and exp\n            const decoded = jwt_decode(localStorage.pt_jwtToken);\n            console.log(\"in effect decoded\", decoded);\n            // Set user and isAuthenticated\n            store.dispatch(setCurrentPartner(decoded));\n\n\n            axios({\n                method: \"get\",\n                url: \"http://localhost:5000/api/p-profile/\" + decoded.id,\n            })\n                .then(function (response) {\n                    //handle success\n                    console.log(response);\n                    setProfData(response.data.payload)\n\n                })\n                .catch(function (error) {\n                    //handle error\n                    console.log(error);\n                });\n\n            // Check for expired token\n            const currentTime = Date.now() / 1000;\n            if (decoded.exp < currentTime) {\n                console.log(\"Session Expired\")\n                // Redirect to login\n                // window.location.href = \"/login\";\n            }\n        }\n        else {\n            history.replace('/partner')\n        }\n    }, [localStorage.pt_jwtToken])\n\n\n\n\n\n\n\n    return (\n        <>\n            <Header />\n            <div className={classes.root}>\n                {props.auth.user.profstatus ?\n\n                    <Container maxWidth=\"lg\">\n                        <Grid\n                            container\n                            spacing={3}\n                        >\n                            <Grid\n                                item\n                                lg={6}\n                                md={6}\n                                xs={12}\n                            >\n                                <ProfileComponent user={profData} />\n                            </Grid>\n                            <Grid\n                                item\n                                lg={6}\n                                md={6}\n                                xs={12}\n                            >\n                                <PartnerCompanyProfile user={profData} />\n                            </Grid>\n\n\n                        </Grid>\n                    </Container>\n\n\n                    // <p>created already and shows profile</p>\n                    :\n\n                    <Container maxWidth=\"lg\">\n                        <Grid\n                            container\n                            spacing={3}\n                        >\n                            <Grid\n                                item\n                                lg={12}\n                                md={12}\n                                xs={12}\n                            >\n                                <Profileform id={props.auth.user.id} />\n                            </Grid>\n                        </Grid>\n                    </Container>\n                }\n                {/* } */}\n            </div>\n        </>\n    )\n}\n\n\n\nPartnerProfile.propTypes = {\n    auth: PropTypes.object.isRequired\n};\n\nfunction mapStateToProps(state) {\n    return {\n        auth: state.auth,\n    }\n}\n\nexport default compose(connect(mapStateToProps, {}, null))(PartnerProfile);"]},"metadata":{},"sourceType":"module"}